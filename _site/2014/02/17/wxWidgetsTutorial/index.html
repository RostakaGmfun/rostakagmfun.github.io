<!DOCTYPE html>
<html lang="en">

  <head>
  <meta charset="UTF-8">
  <link href="http://gmpg.org/xfn/11" rel="profile">

  <!-- Enable responsiveness on mobile devices-->
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1">

  <title>
    
      WxWidgets Tutorial &middot; Awesome Programmer
    
  </title>

  <!-- CSS -->
  <link rel="stylesheet" href="/public/css/poole.css">
  <link rel="stylesheet" href="/public/css/syntax.css">

  <!-- Icons -->
  <link rel="apple-touch-icon-precomposed" sizes="144x144" href="/public/apple-touch-icon-precomposed.png">
  <link rel="shortcut icon" href="/public/favicon.ico">

  <!-- RSS -->
  <link rel="alternate" type="application/atom+xml" title="Awesome Programmer" href="/atom.xml">
</head>


  <body>

    <div class="container content">
      <header class="masthead">
        <h3 class="masthead-title">
          <a href="/" title="Home">Awesome Programmer</a>
          <small>RostakaGmfun's blog</small>
        </h3>
      </header>

      <main>
        <article class="post">
  <h1 class="post-title">WxWidgets Tutorial</h1>
  <time datetime="2014-02-17T00:00:00+02:00" class="page-date">17 Feb 2014</time>
  <h2 id="introduction">Introduction</h2>

<p><em>wxWidgets</em> is a cross-platform C++ GUI toolkit which provides  an easy and fast way to implement GUI of any complexity.
 In this tutorial we will compile <em>wxWidgets</em> under Linux and write simple GUI application.</p>

<h2 id="compiling-wxwidgets">Compiling wxWidgets</h2>

<p>First, make sure you have GTK development files:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$sudo</span> apt-get install libgtk2.0-dev</code></pre></div>

<p>Next, download wxGTK source and extract the files somewere. After you have extracted the files:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="lineno">1</span> <span class="nv">$cd</span> path/to/wxGTK
<span class="lineno">2</span> <span class="nv">$mkdir</span> build-gtk
<span class="lineno">3</span> <span class="nv">$cd</span> build-gtk</code></pre></div>

<p>We have created the build directory from where we will build wxWidgets binaries.
Next, type this to configure:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$.</span>./configure</code></pre></div>

<p>And then:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$make</span></code></pre></div>

<p>After the compilation you can install wxWidgets with:</p>

<div class="highlight"><pre><code class="language-bash" data-lang="bash"><span class="nv">$make</span> install</code></pre></div>

<p>Writing a simple demo</p>

<p>Our next step is to write simple demo to demonstrate the power of wxWidgets library.
We wll create a window with toolbar, menu and a few tabs with different things inside.
I will guide you step by step and eventually you can grab the source code for this
tutorial from it`s Github <a href="https://github.com/RostakaGmfun/wxWidgetsTutorial">repository</a>.</p>

<h2 id="creating-an-application-and-window">Creating an application and window</h2>

<p>Every wxWidgets application is represented as a class derived from <code>wxApp</code>.  So we will declare our <code>App</code> class derived from <code>wxApp</code> in <code>app.h</code> file:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="cp">#include &lt;wx/app.h&gt;</span>
<span class="lineno">2</span> 
<span class="lineno">3</span>     <span class="k">class</span> <span class="nc">App</span> <span class="o">:</span> <span class="k">public</span> <span class="n">wxApp</span>
<span class="lineno">4</span>     <span class="p">{</span>
<span class="lineno">5</span>         <span class="k">public</span><span class="o">:</span>
<span class="lineno">6</span>             <span class="k">virtual</span> <span class="kt">bool</span> <span class="n">OnInit</span><span class="p">();</span>
<span class="lineno">7</span>     <span class="p">};</span></code></pre></div>

<p>Here we declare a single method OnInit() which will be called once our application starts. In this method we will create our window. The actual application entry point and implementation is defined as IMPLEMENT_APP macro which we place in our app.cpp file:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="cp">#include &quot;app.h&quot;</span>
<span class="lineno">2</span> 
<span class="lineno">3</span> <span class="n">IMPLEMENT_APP</span><span class="p">(</span><span class="n">App</span><span class="p">);</span></code></pre></div>

<p>Our App::OnInit() is empty for now:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="kt">bool</span> <span class="n">App</span><span class="o">::</span><span class="n">OnInit</span><span class="p">()</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span> 
<span class="lineno">4</span>     <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">5</span> <span class="p">}</span></code></pre></div>

<p>Now it is time to create the window. Our  window class is called Frame and is derived from wxFrame. I placed Frame declaration and definition in main.h and main.cpp respectively. I called those two files as main because the main code is here.</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="cp">#include &lt;wx/wx.h&gt;</span>
<span class="lineno">2</span> 
<span class="lineno">3</span> <span class="k">class</span> <span class="nc">Frame</span><span class="o">:</span> <span class="k">public</span> <span class="n">wxFrame</span> <span class="c1">//our Frame class derives from wxFrame base class</span>
<span class="lineno">4</span> <span class="p">{</span>
<span class="lineno">5</span>     <span class="k">public</span><span class="o">:</span>
<span class="lineno">6</span>         <span class="n">Frame</span><span class="p">(</span><span class="n">wxFrame</span> <span class="o">*</span><span class="n">frame</span><span class="p">,</span> <span class="k">const</span> <span class="n">wxString</span><span class="o">&amp;</span> <span class="n">title</span><span class="p">);</span>
<span class="lineno">7</span>         <span class="o">~</span><span class="n">Frame</span><span class="p">();</span></code></pre></div>

<p>We have an constructor which takes as parameters a pointer to the parent window(if any) and a title string. Next look at the constructor definition:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="n">Frame</span><span class="o">::</span><span class="n">Frame</span><span class="p">(</span><span class="n">wxFrame</span> <span class="o">*</span><span class="n">frame</span><span class="p">,</span> <span class="k">const</span> <span class="n">wxString</span><span class="o">&amp;</span> <span class="n">title</span><span class="p">)</span> <span class="c1">//in our constructor we call wxFrame constructor to create a window</span>
<span class="lineno">2</span>     <span class="o">:</span> <span class="n">wxFrame</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">wxPoint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">wxDefaultSize</span><span class="p">,</span><span class="n">wxMINIMIZE_BOX</span> <span class="o">|</span> <span class="n">wxSYSTEM_MENU</span> <span class="o">|</span> <span class="n">wxCAPTION</span> <span class="o">|</span> <span class="n">wxCLOSE_BOX</span><span class="p">)</span>
<span class="lineno">3</span> <span class="p">{</span>
<span class="lineno">4</span>     <span class="n">SetSize</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">768</span><span class="p">);</span> <span class="c1">//set the size</span>
<span class="lineno">5</span> <span class="p">}</span></code></pre></div>

<p>In our constructor we call <code>wxFrame</code> constructor to actually create the window at screen coordinates <code>(100;100)</code>.
We also call <code>wxFrame</code> member function <code>SetSize()</code><code> to set the window size
(you also can specify window size in constructor by writing </code>wxPoint(1024,768)<code>instead of `wxDefaultSize`).
To show our window we should include `main.h` file in `app.cpp` and modify our `App::OnInit()</code> function:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="kt">bool</span> <span class="n">App</span><span class="o">::</span><span class="n">OnInit</span><span class="p">()</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="n">Frame</span><span class="o">*</span> <span class="n">frame</span> <span class="o">=</span> <span class="k">new</span> <span class="n">Frame</span><span class="p">(</span><span class="mi">0L</span><span class="p">,</span> <span class="s">&quot;Awesome Programmer wxWidgets Tutorial&quot;</span><span class="p">);</span>
<span class="lineno">4</span> 
<span class="lineno">5</span>     <span class="n">frame</span><span class="o">-&gt;</span><span class="n">Show</span><span class="p">();</span>
<span class="lineno">6</span> 
<span class="lineno">7</span>     <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">8</span> <span class="p">}</span></code></pre></div>

<p>We call wxFrame::Show() to show our window.</p>

<h2 id="adding-menu-and-toolbar">Adding menu and toolbar</h2>

<p>It is time to add menu to our window. In <code>main.h</code>:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="k">class</span> <span class="nc">Frame</span><span class="o">:</span> <span class="k">public</span> <span class="n">wxFrame</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="k">private</span><span class="o">:</span>
<span class="lineno">4</span>         <span class="n">wxMenuBar</span><span class="o">*</span> <span class="n">menuBar</span><span class="p">;</span>
<span class="lineno">5</span>  <span class="n">wxMenu</span><span class="o">*</span> <span class="n">menuFile</span><span class="p">;</span>
<span class="lineno">6</span>  <span class="n">wxMenu</span><span class="o">*</span> <span class="n">menuAbout</span><span class="p">;</span>
<span class="lineno">7</span> <span class="p">}</span></code></pre></div>

<p>And in <code>main.cpp</code>:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="n">Frame</span><span class="o">::</span><span class="n">Frame</span><span class="p">(</span><span class="n">wxFrame</span> <span class="o">*</span><span class="n">frame</span><span class="p">,</span> <span class="k">const</span> <span class="n">wxString</span><span class="o">&amp;</span> <span class="n">title</span><span class="p">)</span>
<span class="lineno"> 2</span>     <span class="o">:</span> <span class="n">wxFrame</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">,</span> <span class="n">title</span><span class="p">,</span> <span class="n">wxPoint</span><span class="p">(</span><span class="mi">100</span><span class="p">,</span><span class="mi">100</span><span class="p">),</span><span class="n">wxDefaultSize</span><span class="p">,</span><span class="n">wxMINIMIZE_BOX</span> <span class="o">|</span> <span class="n">wxSYSTEM_MENU</span> <span class="o">|</span> <span class="n">wxCAPTION</span> <span class="o">|</span> <span class="n">wxCLOSE_BOX</span><span class="p">)</span>
<span class="lineno"> 3</span> <span class="p">{</span>
<span class="lineno"> 4</span>        <span class="n">SetSize</span><span class="p">(</span><span class="mi">1024</span><span class="p">,</span><span class="mi">768</span><span class="p">);</span> <span class="c1">//set the size</span>
<span class="lineno"> 5</span>        <span class="n">menuBar</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxMenuBar</span><span class="p">;</span>
<span class="lineno"> 6</span>        <span class="n">menuFile</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxMenu</span><span class="p">;</span>
<span class="lineno"> 7</span>        <span class="n">menuAbout</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxMenu</span><span class="p">;</span>
<span class="lineno"> 8</span>        <span class="n">menuPaint</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxMenu</span><span class="p">;</span>
<span class="lineno"> 9</span> 
<span class="lineno">10</span>        <span class="c1">//append menu entries for our &#39;File&#39; and &#39;About&#39; menus</span>
<span class="lineno">11</span>        <span class="c1">//we use the same event IDs as in EVT_MENU macro (see above)</span>
<span class="lineno">12</span>        <span class="n">menuFile</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">NEW</span><span class="p">,</span><span class="s">&quot;&amp;New&quot;</span><span class="p">);</span>
<span class="lineno">13</span>        <span class="n">menuFile</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">OPEN</span><span class="p">,</span><span class="s">&quot;&amp;Open&quot;</span><span class="p">);</span>
<span class="lineno">14</span>        <span class="n">menuFile</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">SAVE</span><span class="p">,</span><span class="s">&quot;&amp;Save&quot;</span><span class="p">);</span>
<span class="lineno">15</span>        <span class="n">menuFile</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">QUIT</span><span class="p">,</span><span class="s">&quot;&amp;Quit&quot;</span><span class="p">);</span>
<span class="lineno">16</span> 
<span class="lineno">17</span>       <span class="n">menuAbout</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">ABOUT</span><span class="p">,</span><span class="s">&quot;&amp;About&quot;</span><span class="p">);</span>
<span class="lineno">18</span> 
<span class="lineno">19</span>  <span class="c1">//append menus to the menubar</span>
<span class="lineno">20</span>  <span class="n">menuBar</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">menuFile</span><span class="p">,</span><span class="s">&quot;&amp;File&quot;</span><span class="p">);</span>
<span class="lineno">21</span>  <span class="n">menuBar</span><span class="o">-&gt;</span><span class="n">Append</span><span class="p">(</span><span class="n">menuAbout</span><span class="p">,</span><span class="s">&quot;&amp;Help&quot;</span><span class="p">);</span>
<span class="lineno">22</span> 
<span class="lineno">23</span>  <span class="c1">//show our menu bar</span>
<span class="lineno">24</span>  <span class="n">SetMenuBar</span><span class="p">(</span><span class="n">menuBar</span><span class="p">);</span>
<span class="lineno">25</span> <span class="p">}</span></code></pre></div>

<p>A little explanation is needed here. First, we create our objects.
The we use <code>wxMenu::Append()</code> function to add menu entry.
<code>wxMenu::Append()</code> function takes as parameter an <code>ID</code> of event to be handled when the users selects that entry(see below) and a text to display.
Finally we append our menus to the menu bar with <code>wxMenuBar::Append() function and set up the menu bar for our window with </code>SetMenuBar() function.</p>

<p>And now let’s add some response to our menu. First of all, place a call to <code>DECLARE_EVENT_TABLE()</code> macro in our <code>Frame</code> class definition.
 We will define so-called event table later. We will specify the event handler - the callback function which will be called on particular event.
  First, we will create an event handler for <code>About</code> menu. So place the following private function declaration in our <code>Frame</code> class:</p>

<pre><code>void OnAbout(wxCommandEvent&amp; event);
</code></pre>

<p>Next, add function’s definition in <code>main.cpp</code>:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">OnAbout</span><span class="p">(</span><span class="n">wxCommandEvent</span> <span class="o">&amp;</span><span class="n">event</span><span class="p">)</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="n">wxMessageBox</span><span class="p">(</span><span class="s">&quot;This is simple wxWidgets tutorial from awesomeproger.blogspot.com&quot;</span><span class="p">,</span> <span class="s">&quot;Awesome Programmer tutorial&quot;</span><span class="p">);</span>
<span class="lineno">4</span> <span class="p">}</span></code></pre></div>

<p>Every event handler in wxWidgets must have it’s own <code>ID</code>. It is possible to use predefined <code>ID</code>s, but we will declare our own as enumeration:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="k">enum</span> <span class="n">ev_ids</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="n">QUIT</span><span class="p">,</span>
<span class="lineno">4</span>     <span class="n">ABOUT</span><span class="p">,</span>
<span class="lineno">5</span>     <span class="n">OPEN</span><span class="p">,</span>
<span class="lineno">6</span>     <span class="n">SAVE</span><span class="p">,</span>
<span class="lineno">7</span>     <span class="n">NEW</span><span class="p">,</span>
<span class="lineno">8</span> <span class="p">};</span></code></pre></div>

<p>We will add more IDs later to have more functionality.
To actually specify this function as event handler we need to add the following code somewhere in <code>main.cpp</code>:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="n">BEGIN_EVENT_TABLE</span><span class="p">(</span><span class="n">Frame</span><span class="p">,</span> <span class="n">wxFrame</span><span class="p">)</span> <span class="c1">//we begin declaring event table by specifying the class we want to declare event table for and it&#39;s base class</span>
<span class="lineno">2</span>     <span class="c1">//we use EVT_MENU macro for menu entries. Here we pas a custom defined event id which we will use later to create appropriate controls</span>
<span class="lineno">3</span>     <span class="n">EVT_MENU</span><span class="p">(</span><span class="n">ABOUT</span><span class="p">,</span> <span class="n">Frame</span><span class="o">::</span><span class="n">OnAbout</span><span class="p">)</span>
<span class="lineno">4</span> <span class="n">END_EVENT_TABLE</span><span class="p">()</span></code></pre></div>

<p><code>EVT_MENU</code> macro specifies a menu event. It takes as parameters and event <code>ID</code> and an event handler function.</p>

<p>Next, try adding a <code>QUIT</code> event, use <code>Close()</code> function to close the window.</p>

<p>Now it is time to create a toolbar which will duplicate the functionality of menu bar. Add a private pointer to <code>wxToolBar</code> in our
<code>Frame</code> class and use the following code to create toolbar:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="n">toolBar</span> <span class="o">=</span> <span class="n">CreateToolBar</span><span class="p">();</span>
<span class="lineno"> 2</span> 
<span class="lineno"> 3</span>     <span class="c1">//we use wxArtProvider class (from wx/artprov.h) to get the default icons into our bitmaps</span>
<span class="lineno"> 4</span>     <span class="n">wxBitmap</span> <span class="n">open</span> <span class="o">=</span> <span class="n">wxArtProvider</span><span class="o">::</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wxART_FILE_OPEN</span><span class="p">,</span><span class="n">wxART_TOOLBAR</span><span class="p">);</span>
<span class="lineno"> 5</span>     <span class="n">wxBitmap</span> <span class="n">exit</span> <span class="o">=</span> <span class="n">wxArtProvider</span><span class="o">::</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wxART_QUIT</span><span class="p">,</span><span class="n">wxART_TOOLBAR</span><span class="p">);</span>
<span class="lineno"> 6</span>     <span class="n">wxBitmap</span> <span class="n">save</span> <span class="o">=</span> <span class="n">wxArtProvider</span><span class="o">::</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wxART_FILE_SAVE</span><span class="p">,</span> <span class="n">wxART_TOOLBAR</span><span class="p">);</span>
<span class="lineno"> 7</span>     <span class="n">wxBitmap</span> <span class="n">b_new</span> <span class="o">=</span> <span class="n">wxArtProvider</span><span class="o">::</span><span class="n">GetBitmap</span><span class="p">(</span><span class="n">wxART_NEW</span><span class="p">,</span><span class="n">wxART_TOOLBAR</span><span class="p">);</span>
<span class="lineno"> 8</span> 
<span class="lineno"> 9</span>     <span class="n">toolBar</span><span class="o">-&gt;</span><span class="n">AddTool</span><span class="p">(</span><span class="n">NEW</span><span class="p">,</span> <span class="n">b_new</span><span class="p">,</span> <span class="s">&quot;New file&quot;</span><span class="p">);</span>
<span class="lineno">10</span>     <span class="n">toolBar</span><span class="o">-&gt;</span><span class="n">AddTool</span><span class="p">(</span><span class="n">OPEN</span><span class="p">,</span> <span class="n">open</span><span class="p">,</span> <span class="s">&quot;Open file&quot;</span><span class="p">);</span>
<span class="lineno">11</span>     <span class="n">toolBar</span><span class="o">-&gt;</span><span class="n">AddTool</span><span class="p">(</span><span class="n">SAVE</span><span class="p">,</span> <span class="n">save</span><span class="p">,</span> <span class="s">&quot;Save file&quot;</span><span class="p">);</span>
<span class="lineno">12</span>     <span class="n">toolBar</span><span class="o">-&gt;</span><span class="n">AddTool</span><span class="p">(</span><span class="n">QUIT</span><span class="p">,</span> <span class="n">exit</span><span class="p">,</span> <span class="s">&quot;Exit&quot;</span><span class="p">);</span>
<span class="lineno">13</span> 
<span class="lineno">14</span>     <span class="c1">//show our toolbar. It needs to be called every time the toolbar has been modified</span>
<span class="lineno">15</span>     <span class="n">toolBar</span><span class="o">-&gt;</span><span class="n">Realize</span><span class="p">();</span></code></pre></div>

<p>We used function <code>CreateToolBar()</code> to create toolbar and <code>wxToolBar::AddTool()</code> to add buttons to it.
The <code>AddTool()</code> functions takes as parameters corresponding event <code>ID</code>, bitmap image for the button(see below)
 and a text to display when the mouse hovers on button.
 To create bitmaps for our images we used <code>wxArtProviderClass</code> instead of manually loading custom images from disk.
 The <code>wxArtProvider::GetBitmap()</code> returns the <code>wxBitmap</code> for us.
 There is a number of predefined values for first parameter of the function and the second parameter tells that we want toolbar bitmap.
 The complete list of bitmap IDs can be found in <code>wxWidgets</code> <a href="http://docs.wxwidgets.org/trunk/classwx_art_provider.html">documentation</a>.
 Finally, the <code>wxToolBar::Realize()</code> functions shows our toolbar to the user.</p>

<h2 id="creating-multiple-tabs">Creating multiple tabs</h2>

<p>It is time to create tabs and add interesting things to them.
First, we will make a tab with <code>wxTreeCtrl</code> demo.
<code>wxTreeCtrl</code> control allows to add tree view and represent hierarchical information.
 Add a private pointers to <code>wxNotebook</code> and <code>wxTreeCtrl</code> in our <code>Frame</code> class and use the following code in our <code>Frame</code> constructor:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="n">notebook</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxNotebook</span><span class="p">(</span><span class="k">this</span><span class="p">,</span><span class="n">wxID_ANY</span><span class="p">);</span>
<span class="lineno">2</span> 
<span class="lineno">3</span>  <span class="n">tree</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxTreeCtrl</span><span class="p">(</span><span class="n">notebook</span><span class="p">,</span><span class="n">wxID_ANY</span><span class="p">);</span>
<span class="lineno">4</span>  <span class="n">notebook</span><span class="o">-&gt;</span><span class="n">AddPage</span><span class="p">(</span><span class="n">tree</span><span class="p">,</span><span class="s">&quot;Tree example&quot;</span><span class="p">);</span>
<span class="lineno">5</span>  <span class="n">tree</span><span class="o">-&gt;</span><span class="n">SetBackgroundColour</span><span class="p">(</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">240</span><span class="p">,</span><span class="mi">240</span><span class="p">,</span><span class="mi">240</span><span class="p">));</span></code></pre></div>

<p>Here we create the <code>wxNotebook</code> object as a child for our Frame and a <code>wxTreeCtrl</code> object as a child of <code>wxNotebook</code>.
 Next, we add a page containing our tree object to the notebook with the function <code>wxNotebook::AddPage()</code><code>.
  We also set the background color to very light for tree object. You can use </code>SetBackgroundColour()`` method for any window type.
Next I will demonstrate the usage of <code>wxTreeCtrl</code>:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">SetWindowStyle</span><span class="p">(</span><span class="n">wxTR_HIDE_ROOT</span><span class="p">);</span> <span class="c1">//hides the real root node to have many roots</span>
<span class="lineno">2</span>     <span class="n">wxTreeItemId</span> <span class="n">root</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">AddRoot</span><span class="p">(</span><span class="s">&quot;invisible root&quot;</span><span class="p">);</span><span class="c1">//this root will be invisible</span>
<span class="lineno">3</span>     <span class="n">wxTreeItemId</span> <span class="n">r1</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">root</span><span class="p">,</span> <span class="s">&quot;Root1&quot;</span><span class="p">);</span>
<span class="lineno">4</span>     <span class="n">wxTreeItemId</span> <span class="n">r2</span> <span class="o">=</span> <span class="n">tree</span><span class="o">-&gt;</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">root</span><span class="p">,</span><span class="s">&quot;Root2&quot;</span><span class="p">);</span>
<span class="lineno">5</span>     <span class="n">tree</span><span class="o">-&gt;</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span><span class="s">&quot;Node1&quot;</span><span class="p">);</span>
<span class="lineno">6</span>     <span class="n">tree</span><span class="o">-&gt;</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">r1</span><span class="p">,</span><span class="s">&quot;Node2&quot;</span><span class="p">);</span>
<span class="lineno">7</span>     <span class="n">tree</span><span class="o">-&gt;</span><span class="n">AppendItem</span><span class="p">(</span><span class="n">r2</span><span class="p">,</span><span class="s">&quot;Node3&quot;</span><span class="p">);</span></code></pre></div>

<p>The <code>wxTR_HIDE_ROOT</code> style flag hides the real root of tree.
We need this in order to have many independent roots (which actually are nodes of hidden root).
Every node in <code>wxTreeCtrl</code> is of type <code>wxTreeItemId</code>.
We first add invisible root and the use the returned element <code>ID</code> to append childs
to it with a help of function <code>wxTreeCtrl::AppendItem()</code>.
 Now we are going to implement the event for node selection. Add function prototype in our <code>Frame</code> class:</p>

<pre><code>void OnTreeItemSelected(wxTreeEvent&amp; event);
</code></pre>

<p>The definition:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">OnTreeItemSelected</span><span class="p">(</span><span class="n">wxTreeEvent</span><span class="o">&amp;</span> <span class="n">event</span><span class="p">)</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="n">wxTreeItemId</span> <span class="n">selectedItem</span> <span class="o">=</span> <span class="n">event</span><span class="p">.</span><span class="n">GetItem</span><span class="p">();</span>
<span class="lineno">4</span>     <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">ItemHasChildren</span><span class="p">(</span><span class="n">selectedItem</span><span class="p">))</span> <span class="c1">//report only if node was selected</span>
<span class="lineno">5</span>         <span class="n">wxMessageBox</span><span class="p">(</span><span class="s">&quot;Selected node name: &quot;</span><span class="o">+</span><span class="n">tree</span><span class="o">-&gt;</span><span class="n">GetItemText</span><span class="p">(</span><span class="n">selectedItem</span><span class="p">),</span> <span class="s">&quot;Node selected!&quot;</span><span class="p">);</span>
<span class="lineno">6</span>     <span class="k">else</span>
<span class="lineno">7</span>         <span class="n">tree</span><span class="o">-&gt;</span><span class="n">Expand</span><span class="p">(</span><span class="n">selectedItem</span><span class="p">);</span> <span class="c1">//othervise just expand the item</span>
<span class="lineno">8</span>     <span class="k">return</span><span class="p">;</span>
<span class="lineno">9</span> <span class="p">}</span></code></pre></div>

<p>We use <code>wxTreeEvent</code> object to get the selected item.
Next we check whether this item has no child nodes(so it is node itself) and if so display the message box with the name of the selected node.
If one of the roots was selected we expand it to show child nodes.
To specify this function as the event handler for tree object, we use the <code>EVT_TREE_ITEM_ACTIVATED</code> macro.
We specify <code>wxID_ANY</code> as <code>ID</code> for our event because we have only one tree object.</p>

<p>Well, let’s add another tab to our window. We will place a code editor there.
For full featured text editor with code highlighting the <code>wxStyledTextCtrl</code> is used.
This is a wrapper around <code>Scintilla</code> code editing component.
Despite the real complexity of code editor, using <code>wxStyledTextCtrl</code> is rather simple and the results are really nice.
So include <code>wx/stc/stc.h</code> header file in <code>main.h</code> and add private to <code>wxStyledTextCtrl</code> in <code>private</code> section. Add the following code to <code>Frame</code> constructor:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="c1">//create Scintilla text editor object</span>
<span class="lineno"> 2</span>     <span class="n">editor</span> <span class="o">=</span> <span class="k">new</span> <span class="n">wxStyledTextCtrl</span><span class="p">(</span><span class="n">notebook</span><span class="p">,</span><span class="n">wxID_ANY</span><span class="p">,</span><span class="n">wxDefaultPosition</span><span class="p">,</span><span class="k">this</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">());</span>
<span class="lineno"> 3</span>     <span class="n">notebook</span><span class="o">-&gt;</span><span class="n">AddPage</span><span class="p">(</span><span class="n">editor</span><span class="p">,</span><span class="s">&quot;Editor&quot;</span><span class="p">);</span>
<span class="lineno"> 4</span>  <span class="c1">//set our font for the whole text. We should specify this before defining styles for particular things (keywords, numbers, string, etc.)</span>
<span class="lineno"> 5</span>  <span class="n">wxFont</span> <span class="nf">font</span><span class="p">(</span><span class="mi">12</span><span class="p">,</span><span class="n">wxFONTFAMILY_DEFAULT</span><span class="p">,</span><span class="n">wxFONTSTYLE_NORMAL</span><span class="p">,</span><span class="n">wxFONTWEIGHT_NORMAL</span><span class="p">);</span>
<span class="lineno"> 6</span>  <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetFont</span><span class="p">(</span><span class="n">wxSTC_STYLE_DEFAULT</span><span class="p">,</span><span class="n">font</span><span class="p">);</span>
<span class="lineno"> 7</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_STYLE_LINENUMBER</span><span class="p">,</span> <span class="n">wxColour</span> <span class="p">(</span><span class="mi">75</span><span class="p">,</span> <span class="mi">75</span><span class="p">,</span> <span class="mi">75</span><span class="p">)</span> <span class="p">);</span>
<span class="lineno"> 8</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetCaretLineVisible</span><span class="p">(</span><span class="nb">true</span><span class="p">);</span> <span class="c1">//enable current line highlighting</span>
<span class="lineno"> 9</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetCaretLineBackground</span><span class="p">(</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">245</span><span class="p">,</span><span class="mi">245</span><span class="p">,</span><span class="mi">255</span><span class="p">));</span> <span class="c1">//very light highliting color for active line</span>
<span class="lineno">10</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetBackground</span> <span class="p">(</span><span class="n">wxSTC_STYLE_LINENUMBER</span><span class="p">,</span> <span class="n">wxColour</span> <span class="p">(</span><span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">,</span> <span class="mi">220</span><span class="p">));</span>
<span class="lineno">11</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetMarginWidth</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">55</span><span class="p">);</span>
<span class="lineno">12</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetMarginType</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wxSTC_MARGIN_NUMBER</span><span class="p">);</span>
<span class="lineno">13</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleClearAll</span><span class="p">();</span>
<span class="lineno">14</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetLexer</span><span class="p">(</span><span class="n">wxSTC_LEX_CPP</span><span class="p">);</span>
<span class="lineno">15</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_STRING</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="lineno">16</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_PREPROCESSOR</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">105</span><span class="p">));</span>
<span class="lineno">17</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_IDENTIFIER</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="lineno">18</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_NUMBER</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="lineno">19</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_CHARACTER</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">));</span>
<span class="lineno">20</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_WORD</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">32</span><span class="p">,</span><span class="mi">100</span><span class="p">,</span><span class="mi">200</span><span class="p">));</span>
<span class="lineno">21</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_COMMENT</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">));</span>
<span class="lineno">22</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetForeground</span> <span class="p">(</span><span class="n">wxSTC_C_COMMENTLINE</span><span class="p">,</span><span class="n">wxColour</span><span class="p">(</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">,</span><span class="mi">150</span><span class="p">));</span>
<span class="lineno">23</span>     <span class="n">editor</span><span class="o">-&gt;</span><span class="n">StyleSetBold</span><span class="p">(</span><span class="n">wxSTC_C_WORD</span><span class="p">,</span> <span class="nb">true</span><span class="p">);</span>
<span class="lineno">24</span> 
<span class="lineno">25</span>     <span class="c1">//list of c++ 11 keywords from http://en.cppreference.com/w/cpp/keyword</span>
<span class="lineno">26</span>  <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetKeyWords</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">wxT</span><span class="p">(</span><span class="s">&quot;alignas alignof and and_eq asm auto bitand bitor bool break case catch char char16_t char32_t class compl const constexpr &quot;</span>
<span class="lineno">27</span>                             <span class="s">&quot;const_cast continue decltype default delete do double dynamic_cast else&quot;</span>
<span class="lineno">28</span>                             <span class="s">&quot;enum explicit export extern false float for friend goto if inline int long mutable namespace new noexcept not not_eq nullptr operator or or_eq private protected public register reinterpret_cast&quot;</span>
<span class="lineno">29</span>                             <span class="s">&quot;return short signed sizeof static static_assert static_cast struct switch template this thread_local throw true try typedef typeid typename union unsigned using virtual void volatile wchar_t while xor xor_eq&quot;</span><span class="p">));</span></code></pre></div>

<p>First we create the editor object and add it as a page to our notebook.
Next we specify a global font before setting particular styling for keywords, strings, numbers etc.
After that we enable current line highlighting and set the highlight color.
We also specify the left margin attributes for line numbers and then begin styling the C++ lexicon.
First we choose the lexer as <code>wxSTC_LEX_CPP</code>. There are a number of predefined lexers.
To see the corresponding defines look into <code>wx/stc/stc.h</code> file.
After that we specify individual colors for strings(enclosed in double quotes),
preprocessor, identifiers, numbers, characters (enclosed in a single quotes),
keywords, line comments, and multiline comments.
We also enable bold font for keywords.
What goes next is a list of all C++ 11 keywords for keyword set 0 (that is our <code>wxSTC_C_WORD</code>).</p>

<p>Now lets add an ability to open files. We will define <code>Frame::OnOpen()</code> event handler.
Try adding the event handler to the event table on your own. And here is the implementation of <code>Frame::OnOpen()</code> function:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">OnOpen</span><span class="p">(</span><span class="n">wxCommandEvent</span> <span class="o">&amp;</span><span class="n">event</span><span class="p">)</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="n">wxString</span> <span class="n">p</span> <span class="o">=</span> <span class="n">wxFileSelector</span><span class="p">(</span><span class="s">&quot;Open file&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">,</span>
<span class="lineno"> 4</span>     <span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;&quot;</span><span class="p">);</span>
<span class="lineno"> 5</span>  <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">!=</span><span class="n">wxEmptyString</span><span class="p">)</span>
<span class="lineno"> 6</span>  <span class="p">{</span>
<span class="lineno"> 7</span>         <span class="n">ifstream</span> <span class="n">file</span><span class="p">(</span><span class="n">p</span><span class="p">);</span>
<span class="lineno"> 8</span>         <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">file</span><span class="p">.</span><span class="n">is_open</span><span class="p">())</span>
<span class="lineno"> 9</span>         <span class="p">{</span>
<span class="lineno">10</span>             <span class="n">wxMessageBox</span><span class="p">(</span><span class="s">&quot;Error opening file&quot;</span><span class="p">,</span><span class="s">&quot;Error&quot;</span><span class="p">);</span>
<span class="lineno">11</span>             <span class="k">return</span><span class="p">;</span>
<span class="lineno">12</span>         <span class="p">}</span>
<span class="lineno">13</span>         <span class="n">fileName</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<span class="lineno">14</span>         <span class="c1">//read file contents</span>
<span class="lineno">15</span>         <span class="n">string</span> <span class="n">val</span><span class="p">,</span> <span class="n">full</span><span class="p">;</span>
<span class="lineno">16</span>         <span class="k">while</span><span class="p">(</span><span class="n">file</span><span class="p">.</span><span class="n">good</span><span class="p">())</span>
<span class="lineno">17</span>         <span class="p">{</span>
<span class="lineno">18</span>             <span class="n">getline</span><span class="p">(</span><span class="n">file</span><span class="p">,</span><span class="n">val</span><span class="p">);</span>
<span class="lineno">19</span>             <span class="n">full</span><span class="o">+=</span><span class="n">val</span><span class="o">+</span><span class="s">&quot;</span><span class="se">\n</span><span class="s">&quot;</span><span class="p">;</span>
<span class="lineno">20</span>         <span class="p">}</span>
<span class="lineno">21</span>         <span class="n">file</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="lineno">22</span>         <span class="n">editor</span><span class="o">-&gt;</span><span class="n">SetText</span><span class="p">(</span><span class="n">full</span><span class="p">);</span>
<span class="lineno">23</span>         <span class="c1">//convert all EOLs to one mode. If you do not understand the reason of this call, comment it out and try out.</span>
<span class="lineno">24</span>         <span class="c1">//Some lines will not be detected by Scintilla</span>
<span class="lineno">25</span>         <span class="n">editor</span><span class="o">-&gt;</span><span class="n">ConvertEOLs</span><span class="p">(</span><span class="n">wxSTC_EOL_LF</span><span class="p">);</span>
<span class="lineno">26</span> 
<span class="lineno">27</span>  <span class="p">}</span>
<span class="lineno">28</span> <span class="p">}</span></code></pre></div>

<p>We use <code>wxFileSelector()</code> function to display file selection dialog.
 The first parameter is dialog name and the other three are default path, default file name, default extension and wildcard,
 which we left empty for simplicity.
 If the returned file name string is not empty(the user selected file) we open and read it with
 <code>std::ifstream</code> and set the text to display in editor with function <code>wxStyledTextCtrl::SetText()</code>.
  Furthermore, we set the member <code>std::string</code> variable <code>fileName</code> to the file name of opened file.
   We will use this variable to implement file saving. So, here is <code>OnSave()</code> event handler:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">OnSave</span><span class="p">(</span><span class="n">wxCommandEvent</span><span class="o">&amp;</span> <span class="n">event</span><span class="p">)</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>         <span class="k">if</span><span class="p">(</span><span class="n">fileName</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span>
<span class="lineno"> 4</span>         <span class="p">{</span>
<span class="lineno"> 5</span>             <span class="n">wxString</span> <span class="n">p</span> <span class="o">=</span> <span class="n">wxSaveFileSelector</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;All Files|*.*|C++ Source Files (*.cpp) |*.cpp| C/C++ Header Files (*.h) |*.h&quot;</span><span class="p">,</span> <span class="s">&quot;new&quot;</span><span class="p">);</span>
<span class="lineno"> 6</span>             <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">!=</span><span class="n">wxEmptyString</span><span class="p">)</span>
<span class="lineno"> 7</span>             <span class="p">{</span>
<span class="lineno"> 8</span>                 <span class="n">fileName</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<span class="lineno"> 9</span>             <span class="p">}</span>
<span class="lineno">10</span>         <span class="p">}</span>
<span class="lineno">11</span>         <span class="n">ofstream</span> <span class="n">of</span><span class="p">(</span><span class="n">fileName</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="lineno">12</span>         <span class="n">of</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">editor</span><span class="o">-&gt;</span><span class="n">GetText</span><span class="p">(),</span><span class="n">editor</span><span class="o">-&gt;</span><span class="n">GetLength</span><span class="p">());</span>
<span class="lineno">13</span>         <span class="n">of</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="lineno">14</span> <span class="p">}</span></code></pre></div>

<p>The <code>wxSaveFileSelector()</code> function shows a save file dialog to the user if the <code>fileName</code> is not set.
 Here we use the wildcard to give the user option to chose file extension.</p>

<p>The last part of tutorial is <code>GDI</code> (Graphics Device Interface) of <code>wxWidgets</code> library.
In this part we will create a simple paint program.
So let’s add one more tab to our notebook and a private member pointer to wxWindow in our <code>Frame</code> class.
To do drawing in <code>wxWidgets</code>, we need a device context, which is encapsulated in <code>wxPaintDC</code> class.
The <code>wxPaintDC</code> class has various methods to draw lines, points, rectangles, text , circles and bitmaps.
 When window is moved to another position, we need to redraw our graphics. That is why the <code>EVT_PAINT</code> event exists.
 However, this event triggers only when the window needs to be redrawn but not when we need to redraw it.
  To have more frequent updates we can use the special <code>EVT_IDLE</code> event macro.
   This event triggers all the time when the window becomes idle. This way we can capture input and draw quite frequently.
Using the paint program we will write it is possible to draw arbitary lines and change background color.
Every line consists of two points. To store points I declared such a structure:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="k">struct</span> <span class="n">Point</span>
<span class="lineno">2</span> <span class="p">{</span>
<span class="lineno">3</span>     <span class="n">Point</span><span class="p">(</span><span class="kt">int</span> <span class="n">_x</span><span class="p">,</span> <span class="kt">int</span> <span class="n">_y</span><span class="p">,</span> <span class="n">wxColour</span> <span class="n">c</span><span class="p">,</span> <span class="kt">int</span> <span class="n">w</span><span class="p">)</span> <span class="o">:</span> <span class="n">x</span><span class="p">(</span><span class="n">_x</span><span class="p">),</span> <span class="n">y</span><span class="p">(</span><span class="n">_y</span><span class="p">),</span><span class="n">color</span><span class="p">(</span><span class="n">c</span><span class="p">),</span> <span class="n">width</span><span class="p">(</span><span class="n">w</span><span class="p">)</span> <span class="p">{}</span>
<span class="lineno">4</span>     <span class="kt">int</span> <span class="n">x</span><span class="p">;</span>
<span class="lineno">5</span>     <span class="kt">int</span> <span class="n">y</span><span class="p">;</span>
<span class="lineno">6</span>     <span class="kt">int</span> <span class="n">width</span><span class="p">;</span>
<span class="lineno">7</span>     <span class="n">wxColour</span> <span class="n">color</span><span class="p">;</span>
<span class="lineno">8</span> <span class="p">};</span></code></pre></div>

<p>The width member specifies the width of line to be drawn from this point and the
 color specifies the color of the line to be drawn. We also should add some members to our <code>Frame</code> class:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno">1</span> <span class="n">std</span><span class="o">::</span><span class="n">vector</span><span class="o">&lt;</span><span class="n">Point</span><span class="o">&gt;</span> <span class="n">points</span><span class="p">;</span>
<span class="lineno">2</span>     <span class="n">wxColour</span> <span class="n">pointColor</span><span class="p">,</span> <span class="n">bgColor</span><span class="p">,</span> <span class="n">prevBgColor</span><span class="p">;</span>
<span class="lineno">3</span>     <span class="kt">int</span> <span class="n">lineWidth</span><span class="p">;</span>
<span class="lineno">4</span>     <span class="kt">bool</span> <span class="n">wasReleased</span><span class="p">;</span></code></pre></div>

<p>The points is an array of points to be drawn.
 The <code>pointColo</code>r and <code>bgColor</code> are used to store the currently selected line color and background color.
 However, we do not need to redraw background color every time.
 We will do this only when the <code>bgColor</code> is changed.
 That is why the <code>prevBgColor</code> member is declared.
 If <code>bgColor != prevBgColor</code>, we will draw a rectangle of color <code>bgColo</code>r and set <code>prevBgColor</code> to <code>bgColor</code>.
  The <code>wasReleased</code> indicates whether the user released left mouse button.
  If so, we have to insert special point with coordinates <code>(-1;-1)</code>,
  which will not be skipped in our drawing function. Having these bits together, here is the drawing code:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">Redraw</span><span class="p">(</span><span class="n">wxDC</span> <span class="o">&amp;</span><span class="n">dc</span><span class="p">)</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="k">if</span><span class="p">(</span><span class="n">bgColor</span><span class="o">!=</span><span class="n">prevBgColor</span><span class="p">)</span>
<span class="lineno"> 4</span>     <span class="p">{</span>
<span class="lineno"> 5</span>         <span class="n">dc</span><span class="p">.</span><span class="n">SetBrush</span><span class="p">(</span><span class="n">wxBrush</span><span class="p">(</span><span class="n">bgColor</span><span class="p">));</span>
<span class="lineno"> 6</span>         <span class="n">dc</span><span class="p">.</span><span class="n">DrawRectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">().</span><span class="n">x</span><span class="p">,</span><span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">().</span><span class="n">y</span><span class="p">);</span>
<span class="lineno"> 7</span>         <span class="n">prevBgColor</span> <span class="o">=</span> <span class="n">bgColor</span><span class="p">;</span>
<span class="lineno"> 8</span>     <span class="p">}</span>
<span class="lineno"> 9</span>     <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">points</span><span class="p">.</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="c1">//draw our points</span>
<span class="lineno">10</span>     <span class="p">{</span>
<span class="lineno">11</span>         <span class="n">dc</span><span class="p">.</span><span class="n">SetPen</span><span class="p">(</span><span class="n">wxPen</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">color</span><span class="p">,</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">width</span><span class="p">,</span><span class="n">wxPENSTYLE_SOLID</span><span class="p">));</span>
<span class="lineno">12</span>         <span class="k">if</span><span class="p">((</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="o">==-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">)</span><span class="o">||</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">].</span><span class="n">x</span><span class="o">==-</span><span class="mi">1</span><span class="o">&amp;&amp;</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span><span class="o">==-</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//check if there are magic values which indicate the line break</span>
<span class="lineno">13</span>             <span class="k">continue</span><span class="p">;</span>
<span class="lineno">14</span>         <span class="n">dc</span><span class="p">.</span><span class="n">DrawLine</span><span class="p">(</span><span class="n">wxCoord</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">].</span><span class="n">x</span><span class="p">),</span><span class="n">wxCoord</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="o">&gt;</span><span class="mi">0</span><span class="o">?</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="o">:</span><span class="mi">0</span><span class="p">].</span><span class="n">y</span><span class="p">),</span><span class="n">wxCoord</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">),</span><span class="n">wxCoord</span><span class="p">(</span><span class="n">points</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">));</span>
<span class="lineno">15</span>     <span class="p">}</span>
<span class="lineno">16</span> <span class="p">}</span></code></pre></div>

<p>The <code>Redraw()</code> function takes as parameter a <code>wxDC</code> object which is the base class for
 <code>wxPaintDC</code> and other device context objects. I will tell you the reason for this later.
 To draw a rectangle(background color) we need to specify a brush to use.
 The we set a pen object to draw lines.
 We loop through our points array and draw the lines between the current and previous point.
 If we encounter a special point with coordinates <code>(-1;-1)</code>, we skip the current point to create a line break.
At this point it is time to write code for capturing user input.The <code>GetInput()</code>
 is an idle event handler which creates points if user is pressing left mouse button and calls <code>Redraw()</code> function:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">GetInput</span><span class="p">(</span><span class="n">wxIdleEvent</span><span class="o">&amp;</span> <span class="n">event</span><span class="p">)</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="n">wxMouseState</span> <span class="n">state</span> <span class="o">=</span> <span class="n">wxGetMouseState</span><span class="p">();</span>
<span class="lineno"> 4</span>     <span class="k">if</span><span class="p">(</span><span class="n">notebook</span><span class="o">-&gt;</span><span class="n">GetSelection</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span>
<span class="lineno"> 5</span>         <span class="k">if</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">LeftIsDown</span><span class="p">())</span>
<span class="lineno"> 6</span>             <span class="p">{</span>
<span class="lineno"> 7</span>                 <span class="kt">int</span> <span class="n">cx</span><span class="p">,</span><span class="n">cy</span><span class="p">;</span>
<span class="lineno"> 8</span>                 <span class="n">cx</span> <span class="o">=</span> <span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetScreenPosition</span><span class="p">().</span><span class="n">x</span><span class="p">;</span>
<span class="lineno"> 9</span>                 <span class="n">cy</span> <span class="o">=</span> <span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetScreenPosition</span><span class="p">().</span><span class="n">y</span><span class="p">;</span>
<span class="lineno">10</span>                 <span class="n">points</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="n">state</span><span class="p">.</span><span class="n">GetX</span><span class="p">()</span><span class="o">-</span><span class="n">cx</span><span class="p">,</span><span class="n">state</span><span class="p">.</span><span class="n">GetY</span><span class="p">()</span><span class="o">-</span><span class="n">cy</span><span class="p">,</span><span class="n">pointColor</span><span class="p">,</span> <span class="n">lineWidth</span><span class="p">));</span>
<span class="lineno">11</span>                 <span class="n">wasReleased</span> <span class="o">=</span> <span class="nb">false</span><span class="p">;</span>
<span class="lineno">12</span>             <span class="p">}</span>
<span class="lineno">13</span>             <span class="k">else</span>
<span class="lineno">14</span>             <span class="p">{</span>
<span class="lineno">15</span>                 <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">wasReleased</span><span class="p">)</span>
<span class="lineno">16</span>                 <span class="p">{</span>
<span class="lineno">17</span>                     <span class="n">points</span><span class="p">.</span><span class="n">push_back</span><span class="p">(</span><span class="n">Point</span><span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="n">pointColor</span><span class="p">,</span><span class="n">lineWidth</span><span class="p">));</span>
<span class="lineno">18</span>                     <span class="n">wasReleased</span> <span class="o">=</span> <span class="nb">true</span><span class="p">;</span>
<span class="lineno">19</span>                 <span class="p">}</span>
<span class="lineno">20</span>             <span class="p">}</span>
<span class="lineno">21</span>     <span class="n">wxPaintDC</span> <span class="n">dc</span><span class="p">(</span><span class="n">gdiExample</span><span class="p">);</span>
<span class="lineno">22</span>     <span class="n">Redraw</span><span class="p">(</span><span class="n">dc</span><span class="p">);</span>
<span class="lineno">23</span> <span class="p">}</span></code></pre></div>

<p>We retrieve current <code>wxMouseState</code> object with <code>wxGetMouseState()</code> function.
Then we can check whether left mouse button is pressed with <code>wxMouseState::LeftIsDown()</code> method.
We than add a point at coordinates of mouse pointer. However, <code>wxMouseState::GetX()</code> and
<code>wxMouseState::GetY()</code> return the screen space pointer coordinates.
We need to add the position of <code>gdiExample</code> window to get the coordinates locally to the top left corner of window in which we draw.
 If mouse button is not pressed and the special point <code>(-1;-1)</code> has not been inserted
 yet(which is indicated by <code>wasReleased</code> variable) we insert it.
 Finally, we create <code>wxPaintDC</code> object for our gdiExample window and pass it to the <code>Redraw()</code> function.</p>

<p>The last piece of our mosaic is to implement image saving.
I showed the definition of <code>OnSave()</code> event handler earlier when we were dealing with text editor.
And here is now its modified version. If the pain tab is selected, we save the image, otherwise we save a text file:</p>

<div class="highlight"><pre><code class="language-cpp" data-lang="cpp"><span class="lineno"> 1</span> <span class="kt">void</span> <span class="n">Frame</span><span class="o">::</span><span class="n">OnSave</span><span class="p">(</span><span class="n">wxCommandEvent</span><span class="o">&amp;</span> <span class="n">event</span><span class="p">)</span>
<span class="lineno"> 2</span> <span class="p">{</span>
<span class="lineno"> 3</span>     <span class="k">if</span><span class="p">(</span><span class="n">notebook</span><span class="o">-&gt;</span><span class="n">GetSelection</span><span class="p">()</span><span class="o">==</span><span class="mi">1</span><span class="p">)</span> <span class="c1">//our simple paint program</span>
<span class="lineno"> 4</span>     <span class="p">{</span>
<span class="lineno"> 5</span>         <span class="n">wxMemoryDC</span> <span class="n">memDC</span><span class="p">;</span> <span class="c1">//create memore dc into which we will draw our image</span>
<span class="lineno"> 6</span>         <span class="n">wxBitmap</span> <span class="nf">image</span><span class="p">(</span><span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">().</span><span class="n">x</span><span class="p">,</span><span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">().</span><span class="n">y</span><span class="p">);</span> <span class="c1">//create bitmap on which the image will be drawn</span>
<span class="lineno"> 7</span>         <span class="n">memDC</span><span class="p">.</span><span class="n">SelectObject</span><span class="p">(</span><span class="n">image</span><span class="p">);</span> <span class="c1">//set the bitmap to be drawn</span>
<span class="lineno"> 8</span>         <span class="n">memDC</span><span class="p">.</span><span class="n">Clear</span><span class="p">();</span>
<span class="lineno"> 9</span>         <span class="c1">//redraw with updating background color</span>
<span class="lineno">10</span>         <span class="n">memDC</span><span class="p">.</span><span class="n">SetBrush</span><span class="p">(</span><span class="n">wxBrush</span><span class="p">(</span><span class="n">bgColor</span><span class="p">));</span>
<span class="lineno">11</span>         <span class="n">memDC</span><span class="p">.</span><span class="n">DrawRectangle</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">().</span><span class="n">x</span><span class="p">,</span><span class="n">gdiExample</span><span class="o">-&gt;</span><span class="n">GetSize</span><span class="p">().</span><span class="n">y</span><span class="p">);</span>
<span class="lineno">12</span>         <span class="n">Redraw</span><span class="p">(</span><span class="n">memDC</span><span class="p">);</span> <span class="c1">//actually draw our image to memory</span>
<span class="lineno">13</span>         <span class="n">memDC</span><span class="p">.</span><span class="n">SelectObject</span><span class="p">(</span><span class="n">wxNullBitmap</span><span class="p">);</span> <span class="c1">//free the bitmap</span>
<span class="lineno">14</span>         <span class="n">wxString</span> <span class="n">p</span> <span class="o">=</span> <span class="n">wxSaveFileSelector</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;PNG Image|*.png|BMP Image|*.bmp|JPEG Image|*.jpg&quot;</span><span class="p">,</span> <span class="s">&quot;image&quot;</span><span class="p">);</span>
<span class="lineno">15</span>         <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">!=</span><span class="n">wxEmptyString</span><span class="p">)</span>
<span class="lineno">16</span> 
<span class="lineno">17</span>         <span class="p">{</span>
<span class="lineno">18</span>             <span class="n">wxString</span> <span class="n">path</span><span class="p">,</span><span class="n">name</span><span class="p">,</span><span class="n">extension</span><span class="p">;</span>
<span class="lineno">19</span>             <span class="n">wxSplitPath</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="o">&amp;</span><span class="n">path</span><span class="p">,</span><span class="o">&amp;</span><span class="n">name</span><span class="p">,</span><span class="o">&amp;</span><span class="n">extension</span><span class="p">);</span>
<span class="lineno">20</span>             <span class="k">if</span><span class="p">(</span><span class="n">extension</span><span class="o">==</span><span class="s">&quot;jpg&quot;</span><span class="p">)</span>
<span class="lineno">21</span>                 <span class="n">image</span><span class="p">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">wxBITMAP_TYPE_JPEG</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
<span class="lineno">22</span>             <span class="k">if</span><span class="p">(</span><span class="n">extension</span><span class="o">==</span><span class="s">&quot;png&quot;</span><span class="p">)</span>
<span class="lineno">23</span>                 <span class="n">image</span><span class="p">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">p</span><span class="p">,</span><span class="n">wxBITMAP_TYPE_PNG</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
<span class="lineno">24</span>             <span class="k">if</span><span class="p">(</span><span class="n">extension</span><span class="o">==</span><span class="s">&quot;bmp&quot;</span><span class="p">)</span>
<span class="lineno">25</span>                 <span class="n">image</span><span class="p">.</span><span class="n">SaveFile</span><span class="p">(</span><span class="n">p</span><span class="p">,</span> <span class="n">wxBITMAP_TYPE_BMP</span><span class="p">,</span><span class="nb">NULL</span><span class="p">);</span>
<span class="lineno">26</span>         <span class="p">}</span>
<span class="lineno">27</span> 
<span class="lineno">28</span> 
<span class="lineno">29</span>     <span class="p">}</span>
<span class="lineno">30</span>     <span class="k">if</span><span class="p">(</span><span class="n">notebook</span><span class="o">-&gt;</span><span class="n">GetSelection</span><span class="p">()</span><span class="o">==</span><span class="mi">2</span><span class="p">)</span> <span class="c1">//we are in editor tab</span>
<span class="lineno">31</span>     <span class="p">{</span>
<span class="lineno">32</span>         <span class="k">if</span><span class="p">(</span><span class="n">fileName</span><span class="p">.</span><span class="n">length</span><span class="p">()</span><span class="o">&lt;=</span><span class="mi">0</span><span class="p">)</span>
<span class="lineno">33</span>         <span class="p">{</span>
<span class="lineno">34</span>             <span class="n">wxString</span> <span class="n">p</span> <span class="o">=</span> <span class="n">wxSaveFileSelector</span><span class="p">(</span><span class="s">&quot;&quot;</span><span class="p">,</span> <span class="s">&quot;All Files|*.*|C++ Source Files (*.cpp) |*.cpp| C/C++ Header Files (*.h) |*.h&quot;</span><span class="p">,</span> <span class="s">&quot;new&quot;</span><span class="p">);</span>
<span class="lineno">35</span>             <span class="k">if</span><span class="p">(</span><span class="n">p</span><span class="o">!=</span><span class="n">wxEmptyString</span><span class="p">)</span>
<span class="lineno">36</span>             <span class="p">{</span>
<span class="lineno">37</span>                 <span class="n">fileName</span> <span class="o">=</span> <span class="n">p</span><span class="p">;</span>
<span class="lineno">38</span>             <span class="p">}</span>
<span class="lineno">39</span>         <span class="p">}</span>
<span class="lineno">40</span>         <span class="n">ofstream</span> <span class="n">of</span><span class="p">(</span><span class="n">fileName</span><span class="p">.</span><span class="n">c_str</span><span class="p">());</span>
<span class="lineno">41</span>         <span class="n">of</span><span class="p">.</span><span class="n">write</span><span class="p">(</span><span class="n">editor</span><span class="o">-&gt;</span><span class="n">GetText</span><span class="p">(),</span><span class="n">editor</span><span class="o">-&gt;</span><span class="n">GetLength</span><span class="p">());</span>
<span class="lineno">42</span>         <span class="n">of</span><span class="p">.</span><span class="n">close</span><span class="p">();</span>
<span class="lineno">43</span>     <span class="p">}</span>
<span class="lineno">44</span> <span class="p">}</span></code></pre></div>

<p>The <code>wxNotebook::GetSelection()</code> returns the index of currently selected tab.
In this piece of code it is assumed that the paint tab is the second and the editor tab it the third tab from the left.
We than create special <code>wxMemoryDC</code> object which features drawing into a <code>wxBitmap</code> object.
We redraw the background and call our <code>Redraw()</code> function to draw our points into <code>memDC</code>.
Eventually, we save the bitmap in <code>JPEG</code>, <code>PNG</code> or <code>BMP</code> format.</p>

<p><img src="/public/wxwidgets-tutorial/paint-shot.png" alt="Our paint program in action" title="Our paint program in action" /></p>

<h2 id="conclusion">Conclusion</h2>

<p>This is the finish. At this point you are able to create nice applications with a help of <code>wxWidgets</code> library.
However, there are a lot of things which I haven’t covered in this tutorial.
Just explore the documentation and Wiki to find out more. For example, <code>wxWidgets</code> features rendering with <code>OpenGL</code> to one of it’s controls.
 Furthermore, you can render <code>HTML</code> documents very simply with a help of <code>wxHTMLWindow</code>.
  Experiment with those things and gain the experience. Good luck!</p>

</article>

<aside class="related">
  <h2>Related Posts</h2>
  <ul class="related-posts">
    
      <li>
        <h3>
          <a href="//2013/10/13/XMLParsing/">
            XML file parsing in C++
            <small><time datetime="2013-10-13T00:00:00+03:00">13 Oct 2013</time></small>
          </a>
        </h3>
      </li>
    
  </ul>
</aside>

      </main>

      <footer class="footer">
        <small>
          &copy; <time datetime="2014-10-20T19:01:30+03:00">2014</time>. All rights reserved.
        </small>
      </footer>
    </div>

  </body>
</html>
